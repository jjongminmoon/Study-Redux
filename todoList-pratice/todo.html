<!DOCTYPE html>
<html lang="en">
  <head>
    <title>처음 만난 리덕스 - TodoList</title>
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>
  <body>
    <h3>오늘 할 일</h3>
    <ul id="todo-list"></ul>
    <div>
      <input id="input-text" />
      <button id="add-button">할 일 추가</button>
    </div>

    <script>
      function todoReducer(state, action) {
        switch (action.type) {
          case "ADD_TODO":
            return state.concat(action.text);
          default:
            return state;
        }
      }

      let store = Redux.createStore(todoReducer, ["처음 만난 리덕스 공부하기"]);

      let todoListElem = document.getElementById("todo-list");
      let inputElem = document.getElementById("input-text");

      function render() {
        todoListElem.innerHTML = "";

        store.getState().forEach((todo) => {
          const todoListItemElem = document.createElement("li");
          todoListItemElem.textContent = todo;
          todoListElem.appendChild(todoListItemElem);
        });
      }

      render();
      store.subscribe(render);

      document.getElementById("add-button").addEventListener("click", function () {
        store.dispatch({
          type: "ADD_TODO",
          text: inputElem.value
        });

        inputElem.value = "";
      });
    </script>
  </body>
</html>
